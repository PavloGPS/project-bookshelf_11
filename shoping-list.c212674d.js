const e=document.querySelector('[data-page="home-list"]'),t=document.querySelector('[data-page="shpng-list"]'),o=document.querySelector(".logo");function n(){e.classList.add("active"),t.classList.remove("active")}e.addEventListener("click",n),t.addEventListener("click",(function(){return t.classList.add("active"),void e.classList.remove("active")})),o.addEventListener("click",n),(()=>{const e=document.querySelector(".js-menu-container"),t=document.querySelector(".js-open-menu"),o=document.querySelector(".js-close-menu"),n=()=>{const o="true"===t.getAttribute("aria-expanded")||!1;t.setAttribute("aria-expanded",!o),e.classList.toggle("is-open");bodyScrollLock[o?"enableBodyScroll":"disableBodyScroll"](document.body)};t.addEventListener("click",n),o.addEventListener("click",n),window.matchMedia("(min-width: 768px)").addEventListener("change",(o=>{o.matches&&(e.classList.remove("is-open"),t.setAttribute("aria-expanded",!1),bodyScrollLock.enableBodyScroll(document.body))}))})();const s=document.querySelector('.theme-switch input[type="checkbox"]'),c=localStorage.getItem("theme"),a="light",i="dark";c&&(document.documentElement.setAttribute("data-theme",c),c===i&&(s.checked=!0)),s.addEventListener("change",(function(e){e.target.checked?(document.documentElement.setAttribute("data-theme",i),localStorage.setItem("theme",i)):(document.documentElement.setAttribute("data-theme",a),localStorage.setItem("theme",a))}),!1);const l=JSON.parse(localStorage.getItem("loсalShoppingList"))||[],r=document.querySelector(".book-list");l.length>0?r.innerHTML=l.map((({book_image:e,title:t,list_name:o,description:n,author:s,buy_links:c})=>{const a=[0,1,3];return`\n        <div class="book-card">\n            <img src="${e||"./images/img-2.jpg"}"\n              class="book-cover" alt="${t}"/>\n            <h2 class="book-title">${t}</h2>\n            <h3 class="book-category">${o}</h3>\n            <p class="book-description">${n||"Sorry no description"}</p>\n            <p class="book-author">${s}</p>\n            <button class="remove-book">Удалить из Shopping list</button>\n          <ul class="book-links">\n            ${c.filter(((e,t)=>a.includes(t))).map((({name:e,url:t})=>`<li><a href=${t} target="_blank">${e}</a></li>`)).join("")}\n          </ul>\n        </div>`})).join(""):r.innerHTML='\n    <div>\n       <p>This page is empty, add some books and proceed to order.</p>\n       <img src="/images/img_1.jpg" />\n     </div>';document.querySelectorAll(".remove-book").forEach(((e,t)=>{e.addEventListener("click",(()=>{l.splice(t,1),localStorage.setItem("local",JSON.stringify(l)),e.parentElement.remove()}))})),async function(e){const t=`https://books-backend.p.goit.global/books/${e}`,o=await fetch(t);if(!o.ok)throw new Error(o.statusText);return o.json()}("643282b1e85766588626a087").then((e=>{const t=new d;t.create(function({author:e,book_image:t,description:o,title:n,_id:s}){const c=JSON.parse(localStorage.getItem("shoppingList")||"[]").some((e=>e._id===s));return`<div class="modal-container">\n      <img src="${t}" width="192"  height="281" alt="${n}" />\n      <h2>${n}</h2>\n      <p>${e}</p>\n      <span>${o||"We are sorry, we have no description of this book."}</span>\n      \n      <button data-id="${s}" data-action="${c?"remove":"add"}" type="button" class="add-to-cart-btn js-close">${c?"REMOVE FROM THE SHOPPING LIST":"ADD TO SHOPPING LIST"}</button>\n  </div>`}(e)),t.open();document.querySelector(".add-to-cart-btn").addEventListener("click",(t=>{const o=t.target.dataset.id,n=JSON.parse(localStorage.getItem("localShoppingList"))||[];if("add"===t.target.dataset.action)console.log(n),n.push(e),localStorage.setItem("localShoppingList",JSON.stringify(n));else{const e=n.findIndex((({id:e})=>e===o));n.splice(e,1),localStorage.setItem("localShoppingList",JSON.stringify(n))}}))})).catch((e=>console.log(e)));class d{constructor(){this.visible=!1}create(e){const t=`<div class="overlay js-module-overlay">\n      <div class="modal-wrapper js-close">\n        <div class="modal">          \n          <button type="button" class="modal-close js-close"></button>\n          <div class="modal-content">\n          ${e}\n          </div>\n        </div>\n      </div>\n    </div>`;this.html=t}open(){if(this.visible)return;this.visible=!0;document.querySelector("body").insertAdjacentHTML("afterbegin",this.html),this.close()}close(){const e=document.querySelector(".js-module-overlay");this.cleanerEscape=this.hendlerEscape.bind(this),this.cleanerClick=this.hendlerClick.bind(this),e.addEventListener("click",this.cleanerClick),document.addEventListener("keydown",this.cleanerEscape)}hendlerClick(e){e.target.classList.contains("js-close")&&(e.currentTarget.remove(),this.cleanEvent())}hendlerEscape(e){if("Escape"===e.code){document.querySelector(".js-module-overlay").remove(),this.cleanEvent()}}cleanEvent(){document.removeEventListener("keydown",this.cleanerEscape),this.visible=!1}}
//# sourceMappingURL=shoping-list.c212674d.js.map
